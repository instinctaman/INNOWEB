function _toConsumableArray(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)}Array.prototype.find||Object.defineProperty(Array.prototype,"find",{value:function(e){if(null==this)throw new TypeError('"this" is null or not defined');var t=Object(this),n=t.length>>>0;if("function"!=typeof e)throw new TypeError("predicate must be a function");for(var r=arguments[1],o=0;o<n;){var a=t[o];if(e.call(r,a,o,t))return a;o++}},configurable:!0,writable:!0}),Array.prototype.findIndex||Object.defineProperty(Array.prototype,"findIndex",{value:function(e){if(null==this)throw new TypeError('"this" is null or not defined');var t=Object(this),n=t.length>>>0;if("function"!=typeof e)throw new TypeError("predicate must be a function");for(var r=arguments[1],o=0;o<n;){var a=t[o];if(e.call(r,a,o,t))return o;o++}return-1},configurable:!0,writable:!0}),Array.from||(Array.from=function(){var e=Object.prototype.toString,t=function(t){return"function"==typeof t||"[object Function]"===e.call(t)},n=function(e){var t=Number(e);return isNaN(t)?0:0!==t&&isFinite(t)?(t>0?1:-1)*Math.floor(Math.abs(t)):t},r=Math.pow(2,53)-1,o=function(e){var t=n(e);return Math.min(Math.max(t,0),r)};return function(e){var n=this,r=Object(e);if(null==e)throw new TypeError("Array.from requires an array-like object - not null or undefined");var a,i=arguments.length>1?arguments[1]:void 0;if("undefined"!=typeof i){if(!t(i))throw new TypeError("Array.from: when provided, the second argument must be a function");arguments.length>2&&(a=arguments[2])}for(var s,l=o(r.length),c=t(n)?Object(new n(l)):new Array(l),u=0;u<l;)s=r[u],i?c[u]="undefined"==typeof a?i(s,u):i.call(a,s,u):c[u]=s,u+=1;return c.length=l,c}}()),Array.prototype.includes||Object.defineProperty(Array.prototype,"includes",{value:function(e,t){function n(e,t){return e===t||"number"==typeof e&&"number"==typeof t&&isNaN(e)&&isNaN(t)}if(null==this)throw new TypeError('"this" is null or not defined');var r=Object(this),o=r.length>>>0;if(0===o)return!1;for(var a=0|t,i=Math.max(a>=0?a:o-Math.abs(a),0);i<o;){if(n(r[i],e))return!0;i++}return!1}}),function(){function e(e,t){t=t||{bubbles:!1,cancelable:!1,detail:void 0};var n=document.createEvent("CustomEvent");return n.initCustomEvent(e,t.bubbles,t.cancelable,t.detail),n}return"function"!=typeof window.CustomEvent&&(e.prototype=window.Event.prototype,void(window.CustomEvent=e))}(),Element.prototype.matches||(Element.prototype.matches=Element.prototype.msMatchesSelector||Element.prototype.webkitMatchesSelector),Element.prototype.closest||(Element.prototype.closest=function(e){var t=this;if(!document.documentElement.contains(t))return null;do{if(t.matches(e))return t;t=t.parentElement||t.parentNode}while(null!==t&&1==t.nodeType);return null}),window.NodeList&&!NodeList.prototype.forEach&&(NodeList.prototype.forEach=function(e,t){t=t||window;for(var n=0;n<this.length;n++)e.call(t,this[n],n,this)}),String.prototype.endsWith||(String.prototype.endsWith=function(e,t){var n=this.toString();("number"!=typeof t||!isFinite(t)||Math.floor(t)!==t||t>n.length)&&(t=n.length),t-=e.length;var r=n.lastIndexOf(e,t);return r!==-1&&r===t});var _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};!function(e){"use strict";function t(e){e=e||"",(e instanceof URLSearchParams||e instanceof t)&&(e=e.toString()),this[c]=a(e)}function n(e){var t={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+","%00":"\0"};return encodeURIComponent(e).replace(/[!'\(\)~]|%20|%00/g,function(e){return t[e]})}function r(e){return decodeURIComponent(e.replace(/\+/g," "))}function o(t){var n={next:function(){var e=t.shift();return{done:void 0===e,value:e}}};return p&&(n[e.Symbol.iterator]=function(){return n}),n}function a(e){var t={};if("object"===("undefined"==typeof e?"undefined":_typeof(e))){for(var n in e)if(e.hasOwnProperty(n)){var o="string"==typeof e[n]?e[n]:JSON.stringify(e[n]);i(t,n,o)}}else{0===e.indexOf("?")&&(e=e.slice(1));for(var a=e.split("&"),s=0;s<a.length;s++){var l=a[s],c=l.indexOf("=");-1<c?i(t,r(l.slice(0,c)),r(l.slice(c+1))):l&&i(t,r(l),"")}}return t}function i(e,t,n){t in e?e[t].push(""+n):e[t]=[""+n]}var s=e.URLSearchParams?e.URLSearchParams:null,l=s&&"a=1"===new s({a:1}).toString(),c="__URLSearchParams__",u=t.prototype,p=!(!e.Symbol||!e.Symbol.iterator);if(!s||!l){u.append=function(e,t){i(this[c],e,t)},u["delete"]=function(e){delete this[c][e]},u.get=function(e){var t=this[c];return e in t?t[e][0]:null},u.getAll=function(e){var t=this[c];return e in t?t[e].slice(0):[]},u.has=function(e){return e in this[c]},u.set=function(e,t){this[c][e]=[""+t]},u.toString=function(){var e,t,r,o,a=this[c],i=[];for(t in a)for(r=n(t),e=0,o=a[t];e<o.length;e++)i.push(r+"="+n(o[e]));return i.join("&")},e.URLSearchParams=s&&!l?new Proxy(s,{construct:function(e,n){return new e(new t(n[0]).toString())}}):t;var f=e.URLSearchParams.prototype;f.polyfill=!0,f.forEach=f.forEach||function(e,t){var n=a(this.toString());Object.getOwnPropertyNames(n).forEach(function(r){n[r].forEach(function(n){e.call(t,n,r,this)},this)},this)},f.sort=f.sort||function(){var e,t,n,r=a(this.toString()),o=[];for(e in r)o.push(e);for(o.sort(),t=0;t<o.length;t++)this["delete"](o[t]);for(t=0;t<o.length;t++){var i=o[t],s=r[i];for(n=0;n<s.length;n++)this.append(i,s[n])}},f.keys=f.keys||function(){var e=[];return this.forEach(function(t,n){e.push([n])}),o(e)},f.values=f.values||function(){var e=[];return this.forEach(function(t){e.push([t])}),o(e)},f.entries=f.entries||function(){var e=[];return this.forEach(function(t,n){e.push([n,t])}),o(e)},p&&(f[e.Symbol.iterator]=f[e.Symbol.iterator]||f.entries)}}("undefined"!=typeof global?global:"undefined"!=typeof window?window:void 0),function(e){function t(e){this.message=e}var n="undefined"!=typeof exports?exports:e,r="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";t.prototype=new Error,t.prototype.name="InvalidCharacterError",n.btoa||(n.btoa=function(e){for(var n,o,a=String(e),i=0,s=r,l="";a.charAt(0|i)||(s="=",i%1);l+=s.charAt(63&n>>8-i%1*8)){if(o=a.charCodeAt(i+=.75),o>255)throw new t("'btoa' failed: The string to be encoded contains characters outside of the Latin1 range.");n=n<<8|o}return l}),n.atob||(n.atob=function(e){var n=String(e).replace(/=+$/,"");if(n.length%4==1)throw new t("'atob' failed: The string to be decoded is not correctly encoded.");for(var o,a,i=0,s=0,l="";a=n.charAt(s++);~a&&(o=i%4?64*o+a:a,i++%4)?l+=String.fromCharCode(255&o>>(-2*i&6)):0)a=r.indexOf(a);return l})}(window),Function.prototype.bind||(Function.prototype.bind=function(e){if("function"!=typeof this)throw new TypeError("Function.prototype.bind - what is trying to be bound is not callable");var t=Array.prototype.slice.call(arguments,1),n=this,r=function(){},o=function(){return n.apply(this instanceof r&&e?this:e,t.concat(Array.prototype.slice.call(arguments)))};return r.prototype=this.prototype,o.prototype=new r,o}),"children"in document.documentElement||(Object.defineProperty(Element.prototype,"children",{get:function(){for(var e=[],t=this.firstChild;t;)1===t.nodeType&&e.push(t),t=t.nextSibling;return e}}),Object.defineProperty(HTMLElement.prototype,"children",{get:function(){for(var e=[],t=this.firstChild;t;)1===t.nodeType&&e.push(t),t=t.nextSibling;return e}})),"children"in document||Object.defineProperty(Document.prototype,"children",{get:function(){for(var e=[],t=this.firstChild;t;)return 1===t.nodeType&&(e.push(t),t=t.nextSibling),e}}),"classList"in document.documentElement||!Object.defineProperty||"undefined"==typeof HTMLElement||Object.defineProperty(HTMLElement.prototype,"classList",{get:function(){function e(e){return function(n){var r=t.className.split(/\s+/),o=r.indexOf(n);e(r,o,n),t.className=r.join(" ")}}var t=this,n={add:e(function(e,t,n){t||e.push(n)}),remove:e(function(e,t){t&&e.splice(t,1)}),toggle:e(function(e,t,n){t?e.splice(t,1):e.push(n)}),contains:function(e){return!!~t.className.split(/\s+/).indexOf(e)},item:function(e){return t.className.split(/\s+/)[e]||null}};return Object.defineProperty(n,"length",{get:function(){return t.className.split(/\s+/).length}}),n}}),"function"!=typeof Object.assign&&Object.defineProperty(Object,"assign",{value:function(e,t){"use strict";if(null==e)throw new TypeError("Cannot convert undefined or null to object");for(var n=Object(e),r=1;r<arguments.length;r++){var o=arguments[r];if(null!=o)for(var a in o)Object.prototype.hasOwnProperty.call(o,a)&&(n[a]=o[a])}return n},writable:!0,configurable:!0});var _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};!function e(t,n,r){function o(i,s){if(!n[i]){if(!t[i]){var l="function"==typeof require&&require;if(!s&&l)return l(i,!0);if(a)return a(i,!0);var c=new Error("Cannot find module '"+i+"'");throw c.code="MODULE_NOT_FOUND",c}var u=n[i]={exports:{}};t[i][0].call(u.exports,function(e){var n=t[i][1][e];return o(n?n:e)},u,u.exports,e,t,n,r)}return n[i].exports}for(var a="function"==typeof require&&require,i=0;i<r.length;i++)o(r[i]);return o}({1:[function(e,t,n){"use strict";function r(){}function o(e){try{return e.then}catch(t){return d=t,v}}function a(e,t){try{return e(t)}catch(n){return d=n,v}}function i(e,t,n){try{e(t,n)}catch(r){return d=r,v}}function s(e){if("object"!=_typeof(this))throw new TypeError("Promises must be constructed via new");if("function"!=typeof e)throw new TypeError("not a function");this._37=0,this._12=null,this._59=[],e!==r&&m(e,this)}function l(e,t,n){return new e.constructor(function(o,a){var i=new s(r);i.then(o,a),c(e,new g(t,n,i))})}function c(e,t){for(;3===e._37;)e=e._12;return 0===e._37?void e._59.push(t):void h(function(){var n=1===e._37?t.onFulfilled:t.onRejected;if(null===n)return void(1===e._37?u(t.promise,e._12):p(t.promise,e._12));var r=a(n,e._12);r===v?p(t.promise,d):u(t.promise,r)})}function u(e,t){if(t===e)return p(e,new TypeError("A promise cannot be resolved with itself."));if(t&&("object"==("undefined"==typeof t?"undefined":_typeof(t))||"function"==typeof t)){var n=o(t);if(n===v)return p(e,d);if(n===e.then&&t instanceof s)return e._37=3,e._12=t,void f(e);if("function"==typeof n)return void m(n.bind(t),e)}e._37=1,e._12=t,f(e)}function p(e,t){e._37=2,e._12=t,f(e)}function f(e){for(var t=0;t<e._59.length;t++)c(e,e._59[t]);e._59=null}function g(e,t,n){this.onFulfilled="function"==typeof e?e:null,this.onRejected="function"==typeof t?t:null,this.promise=n}function m(e,t){var n=!1,r=i(e,function(e){n||(n=!0,u(t,e))},function(e){n||(n=!0,p(t,e))});n||r!==v||(n=!0,p(t,d))}var h=e("asap/raw"),d=null,v={};t.exports=s,s._99=r,s.prototype.then=function(e,t){if(this.constructor!==s)return l(this,e,t);var n=new s(r);return c(this,new g(e,t,n)),n}},{"asap/raw":4}],2:[function(e,t,n){"use strict";function r(e){var t=new o(o._99);return t._37=1,t._12=e,t}var o=e("./core.js");t.exports=o;var a=r(!0),i=r(!1),s=r(null),l=r(void 0),c=r(0),u=r("");o.resolve=function(e){if(e instanceof o)return e;if(null===e)return s;if(void 0===e)return l;if(e===!0)return a;if(e===!1)return i;if(0===e)return c;if(""===e)return u;if("object"==("undefined"==typeof e?"undefined":_typeof(e))||"function"==typeof e)try{var t=e.then;if("function"==typeof t)return new o(t.bind(e))}catch(n){return new o(function(e,t){t(n)})}return r(e)},o.all=function(e){var t=Array.prototype.slice.call(e);return new o(function(e,n){function r(i,s){if(s&&("object"==("undefined"==typeof s?"undefined":_typeof(s))||"function"==typeof s)){if(s instanceof o&&s.then===o.prototype.then){for(;3===s._37;)s=s._12;return 1===s._37?r(i,s._12):(2===s._37&&n(s._12),void s.then(function(e){r(i,e)},n))}var l=s.then;if("function"==typeof l){var c=new o(l.bind(s));return void c.then(function(e){r(i,e)},n)}}t[i]=s,0===--a&&e(t)}if(0===t.length)return e([]);for(var a=t.length,i=0;i<t.length;i++)r(i,t[i])})},o.reject=function(e){return new o(function(t,n){n(e)})},o.race=function(e){return new o(function(t,n){e.forEach(function(e){o.resolve(e).then(t,n)})})},o.prototype["catch"]=function(e){return this.then(null,e)}},{"./core.js":1}],3:[function(e,t,n){"use strict";function r(){if(l.length)throw l.shift()}function o(e){var t;t=s.length?s.pop():new a,t.task=e,i(t)}function a(){this.task=null}var i=e("./raw"),s=[],l=[],c=i.makeRequestCallFromTimer(r);t.exports=o,a.prototype.call=function(){try{this.task.call()}catch(e){o.onerror?o.onerror(e):(l.push(e),c())}finally{this.task=null,s[s.length]=this}}},{"./raw":4}],4:[function(e,t,n){(function(e){"use strict";function n(e){s.length||(i(),l=!0),s[s.length]=e}function r(){for(;c<s.length;){var e=c;if(c+=1,s[e].call(),c>u){for(var t=0,n=s.length-c;n>t;t++)s[t]=s[t+c];s.length-=c,c=0}}s.length=0,c=0,l=!1}function o(e){var t=1,n=new p(e),r=document.createTextNode("");return n.observe(r,{characterData:!0}),function(){t=-t,r.data=t}}function a(e){return function(){function t(){clearTimeout(n),clearInterval(r),e()}var n=setTimeout(t,0),r=setInterval(t,50)}}t.exports=n;var i,s=[],l=!1,c=0,u=1024,p=e.MutationObserver||e.WebKitMutationObserver;i="function"==typeof p?o(r):a(r),n.requestFlush=i,n.makeRequestCallFromTimer=a}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],5:[function(e,t,n){"function"!=typeof Promise.prototype.done&&(Promise.prototype.done=function(e,t){var n=arguments.length?this.then.apply(this,arguments):this;n.then(null,function(e){setTimeout(function(){throw e},0)})})},{}],6:[function(e,t,n){e("asap"),"undefined"==typeof Promise&&(Promise=e("./lib/core.js"),e("./lib/es6-extensions.js")),e("./polyfill-done.js")},{"./lib/core.js":1,"./lib/es6-extensions.js":2,"./polyfill-done.js":5,asap:3}]},{},[6]),window.requestAnimationFrame||(window.requestAnimationFrame=window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.msRequestAnimationFrame||function(e){window.setTimeout(e,40)},window.cancelAnimationFrame=window.cancelAnimationFrame||window.mozCancelAnimationFrame),"undefined"==typeof webpublicationNamespace&&(window.webpublicationNamespace=window.w={Class:{},Main:{trackerManager:{trackPage:function(){},trackEvent:function(){},initPageTitles:function(){}}},Param:{pathRoot:"publication/"},Utils:{}}),function(e){function t(){for(var e in r){this[e]={};for(var t=0;t<r[e].length;t++)this[e][r[e][t]]=this.defaultCall.bind(this,e,r[e][t])}}var n=[],r={common:["getValue","resolveValues","getDeviceInformation","getVersion","debugMode"],page:["getVisiblePages","getCount","addNewLink","removeLinkByID","open","openNext","openPrevious","shareSocial","openFirst","openLast","clickLink","clickButton","downloadPDF","print"],pagination:["getVerticalArrowPosition","setVerticalArrowsPosition"],configsJson:["getPageData","setPageData"],tab:["open"],navigator:["openUrl"],viewer:["changeMode","getCurrentMode","linkHandler"],content:["getContentURLByID","getContentAssetByID"],menu:["open","close","activate","desactivate"],lightbox:["open","openPopup","close","getOpenList","closeAll"],stat:["trackPage","trackEvent","trackCustomPage","trackCustomEvent"],event:["onPageChange"],styleSheet:[],panels:["share","search","favorites","thumbnail","summary"],gallery:["open","openAssetInApp","doActionInApp"]};window.apiActionScriptConfig={actionScriptApiMethod:"commonApiActionScriptCall",javaScriptNamespace:"webpublicationNamespace",javaScriptApiMethod:"NIApi.call",javaScriptEventMethod:"NIApi.event"},window.setExternalInterfaceIsReady=function(e){return NIApi.flashViewer=document.getElementById("Visio"),window.apiActionScriptInfo=e,window.externalInterfaceIsReady=!0,window.apiActionScriptConfig},window.addEventListener("message",function(e){if("string"==typeof e.data&&0===e.data.indexOf("api/")){for(var t=e.data.replace("api/","").split("/"),n=0;n<t.length;n++)t[n]=decodeURIComponent(t[n]);var r=t.shift().split("."),o=NIApi[r[0]][r[1]].apply(NIApi,t);e.source&&("event"===r[0]?e.source.postMessage({method:r.join("."),arguments:t,result:o},e.origin):o.then(function(n){e.source.postMessage({method:r.join("."),arguments:t,result:n},e.origin)}))}},!1),t.prototype.defaultCall=function(){var e=Array.prototype.slice.call(arguments);return new Promise(function(t,r){n.push({resolve:t,args:e})})},t.prototype.register=function(e,t){var n=e.split(".");this[n[0]][n[1]]=t;for(var r=this.getQueryList(),o=0;o<r.length;o++)r[o].args[0]===n[0]&&r[o].args[1]===n[1]&&(r[o].resolve(t.apply(this,r[o].args.splice(2))),r.splice(o,1))},t.prototype.call=function(t){return"flash"===e.Main.switcher.mode&&("event"===t.method&&"init"===t.args[0].type&&e.require(["../../global_conf/api_as3.js"]).then(function(){t.args[0].type="page";for(var e=0;e<t.args[0].visiblePages.length;e++)t.args[0].params.value=t.args[0].visiblePages[e].value,this.resolveActionScriptCall(t)}.bind(this)),this.resolveActionScriptCall?this.resolveActionScriptCall(t):void 0)},t.prototype.getFunctionList=function(){return r},t.prototype.getQueryList=function(){return n},e.Class.CommonApi=t,window.NIApi=new e.Class.CommonApi}(webpublicationNamespace);var _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};!function(e){var t=!0;e.Utils._assertDebug=function(e){return e===!0?t=!0:e===!1&&(t=!1),t},e.Utils._assert=function(e,n){return e===!1&&t===!0&&console.error(n),e},e.Utils._assertInteger=function(t,n){return e.Utils._assert(t%1===0,n)},e.Utils._assertString=function(t,n){return e.Utils._assert("string"==typeof t,n)},e.Utils._assertBoolean=function(t,n){return e.Utils._assert("boolean"==typeof t,n)},e.Utils._assertJson=function(t,n){if(e.Utils._assert("string"==typeof t,n)){var r=!0;try{JSON.parse(t)}catch(o){r=!1}return e.Utils._assert(r,n)}return!1},e.Utils._assertObject=function(t,n){return e.Utils._assert("object"===("undefined"==typeof t?"undefined":_typeof(t)),n)},e.Utils._assertFunction=function(t,n){return e.Utils._assert("function"==typeof t,n)},e.Utils._assertOneOf=function(t,n,r){return e.Utils._assert(n.indexOf(t)>=0,r)},e.Utils.noop=function(){},e.Utils.callEvent=function(){return"CustomEvent"in window&&"function"==typeof window.CustomEvent?function(e,t,n){var r=new CustomEvent(t,{bubbles:!0,cancelable:!0});r.args=n,r&&e.dispatchEvent(r)}:function(e,t,n){var r;try{r=document.createEvent("HTMLEvents")}catch(o){r=document.createEvent("Event")}r.initEvent(t,!0,!0),r.bubbles=!0,r.args=n,r&&e.dispatchEvent(r)}}(),e.Utils.getPagesBetween=function(e,t){for(var n=[],r=e;r<=t;)n.push(r),r++;return n},e.Utils.getClosestByClass=function(e,t){do if(e.classList&&e.classList.contains(t)===!0)return e;while(null!==(e=e.parentNode));return!1},e.Utils.getClosestByAttribute=function(e,t){do{var n=!!e.attributes&&e.attributes.length;if(n&&n>0&&null!==e.getAttribute(t))return e}while(null!==(e=e.parentNode));return!1},e.Utils.getCookie=function(e){for(var t=e+"=",n=document.cookie.split(";"),r=0;r<n.length;r++){for(var o=n[r];" "===o.charAt(0);)o=o.substring(1);if(0===o.indexOf(t))return o.substring(t.length,o.length)}return""},e.Utils.promiseXHR=function(e,t,n,r,o){return r=r||null,new Promise(function(a,i){var s=new XMLHttpRequest;if(s.open(e,t,!0),o&&(s.withCredentials=!0),n instanceof Array)for(var l=0;l<n.length;l++)"undefined"!=typeof n[l]&&("resolve"===n[l].key&&(i=a),"overrideMimeType"===n[l].key?s.overrideMimeType(n[l].value):"Authorization"===n[l].key?(s.withCredentials=!0,s.setRequestHeader(n[l].key,"Basic "+btoa(n[l].username+":"+n[l].password))):s.setRequestHeader(n[l].key,n[l].value));s.onreadystatechange=function(){4===s.readyState&&(404===s.status?i(s):a(s))};try{s.send(r)}catch(c){i(s)}})},e.Utils.setCookie=function(e,t,n){var r=new Date;r.setTime(r.getTime()+24*n*60*60*1e3);var o="expires="+r.toUTCString();document.cookie=e+"="+t+"; "+o},e.Utils.resolveVariable=function(t){if(t&&"string"==typeof t){var n,r="",o="",a=t.match(/\$([A-Za-z0-9-_]+)\$/gi);if(a)for(n=0;n<a.length;n++)r=a[n].substring(1,a[n].length-1),o=e.Main.urlManager.get(r)||e.Main.xmlManager.getVariable(r),"transferring"===r&&e.Main.xmlManager.getVariable(r)&&(o=e.Main.xmlManager.getVariable(r)),"undefined"!=typeof o&&(t=t.replace(a[n],o));if(a=t.match(/\$\{\S+?\}/gi))for(n=0;n<a.length;n++)r=a[n].substring(2,a[n].length-1),o=e.Main.urlManager.get(r)||e.Main.xmlManager.getVariable(r),"transferring"===r&&e.Main.xmlManager.getVariable(r)&&(o=e.Main.xmlManager.getVariable(r)),"undefined"!=typeof o&&(t=t.replace(a[n],o));return t}if(t instanceof Array)return t.map(e.Utils.resolveVariable);if("object"===("undefined"==typeof t?"undefined":_typeof(t))){for(var i in t)t[i]=e.Utils.resolveVariable(t[i]);return t}return t},NIApi.register("common.resolveValues",function(t){return Promise.resolve(e.Utils.resolveVariable(t))}),NIApi.register("common.locale",function(t){return e.Main.xmlManager.get("locale",t)}),NIApi.register("common.getValue",function(t){return Promise.resolve(e.Main.xmlManager.getVariable(t))}),e.Utils.resolveTranslation=function(t){if(t&&"string"==typeof t){var n=t.match(/\#([A-Za-z0-9-_]+)\#/gi);if(n)for(var r="",o="",a=0;a<n.length;a++)r=n[a].substring(1,n[a].length-1),o=e.Main.xmlManager.get("locale",r),o&&(t=t.replace(n[a],o));return t}return""},e.Utils.resolveString=function(t){for(var n="",r=t;n!==r;)n=e.Utils.resolveTranslation(e.Utils.resolveVariable(r)),r=e.Utils.resolveTranslation(e.Utils.resolveVariable(n));return n},e.Utils.getFunctionName=function(e){var t="function"==typeof e,n=t&&(e.name&&["",e.name]||e.toString().match(/function ([^\(]+)/));return!t&&"not a function"||n&&n[1]||"anonymous"},e.Utils.hexToRgb=function(){function e(e){return parseInt(e.substring(0,2),16)}function t(e){return parseInt(e.substring(2,4),16)}function n(e){return parseInt(e.substring(4,6),16)}function r(e){return"#"===e.charAt(0)?e.substring(1):e}return function(o,a){o=r(o);var i=e(o),s=t(o),l=n(o);return"undefined"!=typeof a?(a=parseFloat(a),"rgba("+i+","+s+","+l+","+a+")"):"rgb("+i+","+s+","+l+")"}}(),e.Utils.whitelistParameters=function(t){var n=[e.Main.xmlManager.get("config","transferringVariable"),"bookmarks","bookmark","gallery","initState","lng","page","startPage","transferring","utm_campaign","utm_content","utm_medium","utm_source","utm_term"],r=document.createElement("a");r.href=t;var o=[],a=r.search.replace("?","");a=a.split("&");for(var i=0;i<a.length;i++){var s=a[i].split("=");n.indexOf(s[0])>=0&&o.push(a[i])}return r.search="?"+o.join("&"),r.href},e.Utils.capitalize=function(e){return e.charAt(0).toUpperCase()+e.slice(1)},e.Utils.scrollIntoView=function(){window.document.body.scrollIntoView(!0)},e.Utils.scrollIntoViewAsyn=function(){setTimeout(e.Utils.scrollIntoView,16),setTimeout(e.Utils.scrollIntoView,500),setTimeout(e.Utils.scrollIntoView,1e3)},e.Utils.supportsPassive=function(){var e;return function(){if("boolean"==typeof e)return e;try{var t=Object.defineProperty({},"passive",{get:function(){e=!0}});window.addEventListener("testPassive",null,t)}catch(n){}return e}}()}(webpublicationNamespace),function(e){function t(t){return i.hasOwnProperty(t)===!1&&(i[t]=new Promise(function(n,r){a(t).then(function(t){e.Utils.promiseXHR("GET",t).then(function(r){n(!0),404!==r.status&&e.Main.cssManager.addLoaded([{url:t,text:r.responseText}])})["catch"](n)})})),i[t]}function n(e){return i.hasOwnProperty(e)===!1&&(i[e]=new Promise(function(t,n){a(e).then(function(e){var n=document.createElement("script");n.src=e,n.onload=t,n.onerror=t,document.head.appendChild(n)})})),i[e]}function r(t){return a(t).then(function(t){return e.Utils.promiseXHR("GET",t)})}var o={css:{},js:{},template:{}},a=function(){function t(e){var t=JSON.parse(e.responseText);for(var n in t.template)t.template[n]&&(o.template["publication/mobile/template/"+n+".html"]=t.template[n]);for(n in t.css)t.css[n]&&(o.css["css/"+n+".css"]=t.css[n]);for(n in t.js)t.js[n]&&(o.js["js/"+n+".js"]=t.js[n]);return Promise.resolve(o)}var n=null;return function(r){if(null===n){var a=e.Main.xmlManager.get("common-ui","assets","custom_template");n=a?e.Utils.promiseXHR("GET",e.Utils.resolveVariable("$template$template.json")).then(t)["catch"](function(){return Promise.resolve({css:{},js:{},template:{}})}):Promise.resolve({css:{},js:{},template:{}})}return n.then(function(){return r=r.replace(/^\.\//,""),r.indexOf(".css")!==-1?r=o.css[r]?o.css[r]:e.Main.xmlManager.getVariable("root")+"mobile/"+r:r.indexOf(".js")!==-1?r=o.js[r]?o.js[r]:e.Main.xmlManager.getVariable("root")+"mobile/"+r:r.indexOf(".html")!==-1&&o.template[r]&&(r=o.template[r]),r=e.Utils.resolveVariable(r),Promise.resolve(r)})}}(),i={};e.require=function(e){if("string"==typeof e)return r(e);for(var o=[],a=0,i=e.length;a<i;a++)0===e[a].indexOf("css/")?o.push(t(e[a]+".css")):0===e[a].indexOf("js/")?o.push(n(e[a]+".js")):e[a].indexOf(".js")!==-1?o.push(n(e[a])):e[a].indexOf(".css")!==-1&&o.push(t(e[a]));return Promise.all(o)},e.addCustomTemplate=function(e,t,n){o[e][t]=n}}(webpublicationNamespace),function(e){"use strict";function t(){this.init()}var n={};t.prototype.contains=function(e){return"undefined"!=typeof n[e]},t.prototype["delete"]=function(e){var t,n=!1,r=new RegExp("&?"+e+"=[^&]+"),o=location.search.match(r);o&&o[0]&&(t=location.href.replace(o[0],""),t=t.replace("?&","?"),history.replaceState(null,null,t),n=!0,location.href.indexOf("?")>-1&&""===location.search&&(t=location.href.replace("?",""),history.replaceState(null,null,t)));var a=location.hash.match(r);return a&&a[0]&&(t=location.href.replace(a[0],""),t=t.replace("?&","?"),history.replaceState(null,null,t),n=!0,location.href.indexOf("#")>-1&&("#"===location.hash||""===location.hash)&&(t=location.href.replace("#",""),history.replaceState(null,null,t))),n},t.prototype.forEach=function(e,t){for(var r in n)e.call(t||window,n[r],r,n)},t.prototype.get=function(e){return n[e]},t.prototype.getAll=function(){return n},t.prototype.init=function(e){n={};var t="",r="",o="",a="";if(0===location.search.indexOf("?")&&(t=location.search.slice(1)),t.length>0){o=t.split("&");for(var i=0;i<o.length;i++)o[i].indexOf("=")>0?(a=o[i].split("="),n[a[0]]=a[1]):n[o[i]]=!0}if(r="",0===location.hash.indexOf("#")&&(r=location.hash.slice(1)),r.length>0){o=r.split("&");for(var s=0;s<o.length;s++)o[s].indexOf("=")>0?(a=o[s].split("="),n[a[0]]=a[1]):n[o[s]]=!0}},t.prototype.set=function(e,t){var r=!1,o=location.hash.replace("#",""),a=o?o.split("&"):[],i=0;if(null===t){for(i=0;i<a.length;i++)a[i].split("=")[0]===e&&(a[i]=void 0,r=!0);delete n[e]}else{for(i=0;i<a.length;i++)a[i].split("=")[0]===e&&(a[i]=e+"="+t,r=!0);n[e]=t}r===!1&&a.push(e+"="+t),location.hash="#"+a.filter(function(e){return"undefined"!=typeof e}).join("&")},e.Class.UrlManager=t}(webpublicationNamespace),function(e){"use strict";var t=e.Class.CommonApi;t.prototype.dispatchEvent=function(t,n){"flash"===e.Main.switcher.mode?this.flashViewer[window.apiActionScriptConfig.javaScriptEventMethod](JSON.stringify({event:"lightbox.close",args:[{}]})):"html"===e.Main.switcher.mode&&this.javascriptviewer.dispatchEvent(t,n)},t.prototype.actionScriptCall=function(t){var n=window.apiActionScriptConfig.actionScriptApiMethod,r="[actionScriptCall]";return!!(e.Utils._assertObject(t,r+" The first argument must be an object")&&e.Utils._assertString(t.method,r+" The method key in arguments must be a string")&&e.Utils._assertFunction(this.flashViewer[n],r+" The method key in arguments must be a function"))&&JSON.parse(this.flashViewer[n](JSON.stringify(t)))},t.prototype.registerJavaScript=t.prototype.register,t.prototype.registerActionScript=t.prototype.register,e.Class.CommonApi=t}(webpublicationNamespace),function(e){"use strict";function t(){this.os={name:a,version:a},this.device={type:a},this.browser={name:a,version:a},f.call(this),this.device.type=this.getResolvedDeviceType(),u[this.os.name]&&(this.os.version=u[this.os.name]()),p[this.browser.name]&&(this.browser.version=p[this.browser.name]())}var n={IOS:"iOS",ANDROID:"android",BLACKBERRY:"blackberry",FIREFOX:"firefox",TIZEN:"tizen",WINDOWS:"windows",MAC:"mac",LINUX:"linux",CHROME_OS:"cros"},r={SAFARI:"safari",CHROME:"chrome",FIREFOX:"firefox",ANDROID:"android",TIZEN:"tizen",BLACKBERRY:"blackberry",IE:"ie",EDGE:"edge"},o={PHABLET:"phablet",TABLET:"tab",PHONE:"phone",DESKTOP:"desktop"},a="unknown",i=["android","blackberry","chrome","edge","firefox","ipad","iphone","linux","mac os","mobile","phone","safari","tablet","tizen","touch","trident","windows","cros"],s={},l=navigator.userAgent.toLowerCase();for(var c in i)s[i[c]]=l.indexOf(i[c])!==-1;var u={iOS:function(){return(/CPU.*OS ([0-9]{1,5})/i.exec(navigator.userAgent)||["",a])[1]},android:function(){return(/Android ([0-9.]+)/i.exec(navigator.userAgent)||["",a])[1]},windows:function(){var e=(/Windows Phone ([0-9.]+)/i.exec(navigator.userAgent)||["",a])[1];if(e!==a)return e;var t=(/Windows NT ([0-9.]+)/i.exec(navigator.userAgent)||["",a])[1];switch(t){case"10.0":return"10";case"6.3":return"8.1";case"6.2":return"8";case"6.1":return"7";case"6.0":return"Vista";case"5.2":case"5.1":return"XP";case"5.0":return"2000";default:return a}},mac:function(){var e=/Mac OS.* ([0-9_]+)/i.exec(navigator.userAgent);return e[1]?e[1].split("_").slice(0,2).join("."):a}},p={chrome:function(){return parseInt((/Chrome\/([0-9]+)/.exec(navigator.userAgent)||["",a])[1])},firefox:function(){return parseInt((/Firefox\/([0-9]+)/.exec(navigator.userAgent)||["",a])[1])},ie:function(){var e=(/rv\:([0-9]+)/.exec(navigator.userAgent)||["",a])[1];return e===a&&(e=(/IEMobile\/([0-9]+)/.exec(navigator.userAgent)||["",a])[1]),e===a&&(e=(/MSIE\s([0-9]+)/.exec(navigator.userAgent)||["",a])[1]),parseInt(e,10)},edge:function(){var e=(/Edge\/([0-9]+)\./.exec(navigator.userAgent)||["",a])[1];return parseInt(e,10)},safari:function(){return parseFloat((/Version\/([0-9]+\.[0-9]+)/.exec(navigator.userAgent)||["",a])[1])}},f=function(){var e=Math.max(document.body.getBoundingClientRect().width,document.body.getBoundingClientRect().height);if((s.iphone||s.ipad)&&!s.trident)return this.os.name=n.IOS,this.device.type=o.TABLET,this.browser.name=r.SAFARI,void(s.iphone?this.device.type=o.PHONE:e<750&&(this.device.type=o.PHABLET));if(s["mac os"]&&!s.trident){this.os.name=n.MAC,this.device.type=o.DESKTOP;var t=navigator.maxTouchPoints>0;return t&&(this.os.name=n.IOS,this.device.type=o.PHONE,e>750&&(this.device.type=o.TABLET)),void(s.chrome?this.browser.name=r.CHROME:s.firefox?this.browser.name=r.FIREFOX:this.browser.name=r.SAFARI)}return s.windows&&(this.os.name=n.WINDOWS,s.edge?(this.os.name=n.WINDOWS,this.browser.name=r.EDGE):s.chrome?this.browser.name=r.CHROME:s.firefox?this.browser.name=r.FIREFOX:this.browser.name=r.IE,s.mobile||s.phone?this.device.type=o.PHONE:this.device.type=o.DESKTOP),s.linux&&(this.os.name=n.LINUX,s.chrome?this.browser.name=r.CHROME:s.firefox&&(this.browser.name=r.FIREFOX),this.device.type=o.DESKTOP),s.tizen?(this.os.name=n.TIZEN,void(this.browser.name=r.TIZEN)):s.blackberry?(this.os.name=n.BLACKBERRY,void(this.browser.name=r.BLACKBERRY)):(s.android&&!s.trident?(this.os.name=n.ANDROID,this.device.type=o.TABLET,s.chrome?this.browser.name=r.CHROME:s.firefox?this.browser.name=r.FIREFOX:this.browser.name=r.ANDROID):s.firefox&&(s.mobile||s.tablet)&&(this.os.name=n.FIREFOX,this.browser.name=r.FIREFOX),s.mobile?this.device.type=o.PHONE:this.device.type!==o.DESKTOP&&(e/window.devicePixelRatio<750?this.device.type=o.PHABLET:e/window.devicePixelRatio<=1280?this.device.type=o.TABLET:this.device.type=o.DESKTOP),s.cros?(this.os.name=n.CHROME_OS,void(this.browser.name=r.CHROME)):void 0)};t.prototype.getResolvedDeviceType=function(){var e=new URLSearchParams(window.location.search),t=e.get("deviceType");return t?t:this.device.type},t.prototype.isDesktop=function(){return this.device.type===o.DESKTOP},t.prototype.isPhone=function(){return this.device.type===o.PHONE;
},t.prototype.isTablet=function(){return this.device.type===o.TABLET||this.device.type===o.PHABLET},t.prototype.isPhablet=function(){return this.device.type===o.PHABLET},t.prototype.isUnknown=function(){return this.device.type===a},t.prototype.isIE=function(){return this.browser.name===r.IE},t.prototype.OS=n,t.prototype.BROWSER=r,t.prototype.FORMAT=o,t.prototype.UNKNOWN=a,e.Class.UserAgentManager=t}(webpublicationNamespace),function(e){"use strict";function t(){}var n={},r={_comments:function(e){return e.replace(/<\!\-\-[^>]*\-\-\>/gim,"")},_default:function(e){return e.replace(/\{\{default\((.*?),\s*(.*?)\)\}\}/g,function(e,t,n){return"<% if ( typeof( "+t+' ) === "undefined" ) { var '+t+" = "+n+" } %>"})},_exists:function(e){return e.replace(/\{\{\s*exists\s*(.*?)\s*\}\}/g,function(e,t){return"<% if ( typeof( "+t+') !== "undefined" ) {  %>'}).replace(/\{\{\s*otherwise\s*\}\}/g,function(){return"<% } else { %>"}).replace(/\{\{\s*\/exists\s*\}\}/g,"<% } %>")},_if:function(e){return e.replace(/\{\{\s*(else|if)(.*?)\s*\}\}/g,function(e,t,n){return"if"===t?"<% if("+n+") { %>":""===n&&"else"===t?"<% } else { %>":"else"===t?"<% } else if("+n+") { %>":void 0}).replace(/\{\{\s*\/if\s*\}\}/g,"<% } %>")},_each:function(e){return e.replace(/\{\{\s*each\((.*?),(.*?)\)\s*(.*?)\s*\}\}/g,function(e,t,n,r){return"<% for(var "+t+" in "+r+") { if("+r+" instanceof Array) {"+t+" = parseInt("+t+", 10);} var "+n+" = "+r+"["+t+"]; %>"}).replace(/\{\{\s*\/each\s*\}\}/g,"<% } %>")},_webpublicationNamespace:function(e){return e.replace(/([^a-zA-Z0-9])w\./gi,"$1webpublicationNamespace.")},_ie:function(e){return e.replace(/([0-9a-z_]+)Plugin/gi,"obj.$1Plugin")},_var:function(e){return e=e.replace(/(\r\n|\n|\r)/gm," "),e.replace(/\{\{(.*?)\}\}/g,"<%=$1%>").replace(/\s+/g," ")}},o={},a={},i={icons:function(t){for(var n=t.querySelectorAll(".svgicon svg"),r=n.length;r--;)n[r].getAttribute("data-color")&&e.Utils.svgIcon(n[r],{icon:n[r].getAttribute("data-icon"),color:n[r].getAttribute("data-color")})},focusable:function(){var t=function(t){var n=t.target,r=e.Utils.getClosestByClass(n,"focusable");r!==!1&&(r.classList.add("focused"),window.setTimeout(function(){r.classList.remove("focused")},300))};return function(e){for(var n=e.querySelectorAll(".focusable"),r=n.length;r--;)n[r].addEventListener("vclick",t)}}(),template:function(){var t=function(t,n,r){return c(e.Utils.getTemplate("component",n),r).then(function(e){for(var o=e.length,i=t.parentNode,s=0;s<o;s++)a[n]&&a[n].call(e[s],r,n),null!==i&&e[s]?i.insertBefore(e[s],t):e[s]&&(t=e[s]),window.setTimeout(function(){this.onTemplateInserted&&this.onTemplateInserted()}.bind(e[s]),10);null!==i&&i.removeChild(t)})};return function(n){for(var r=n.querySelectorAll(".templateManagerPlaceholder"),o=[],a=0;a<r.length;a++)if(null!==r[a].parentNode){var i=r[a].getAttribute("data-template"),s=JSON.parse(r[a].getAttribute("data-data")),l=e.require(["js/component/"+i,"css/component/"+i]).then(t.bind(this,r[a],i,s));o.push(l)}return Promise.all(o)}}()},s=function(e,t){for(var n=[],r=0,o=function(){if(--r<=0)for(var e=0;e<n.length;e++){var o=document.createElement("script");o.type="text/javascript",o.innerHTML=n[e],t.appendChild(o)}},a=function(e){if(e.src){var a=document.createElement("script");a.type="text/javascript",a.src=e.src,a.onload=o,r++,t.appendChild(a)}else n.push(e.innerHTML);e.outerHTML=""},i=function(e){var n=document.createElement("link");n.setAttribute("rel","stylesheet"),n.setAttribute("type","text/css"),n.href=e.href,t.appendChild(n),e.outerHTML=""},s=e.length,l=0;l<s;l++){if(e[l].getElementsByTagName){for(var c=e[l].getElementsByTagName("script"),u=0;u<c.length;u++)a(c[u]);"SCRIPT"===e[l].tagName&&a(e[l]);for(var p=e[l].getElementsByTagName("link"),f=0;f<p.length;f++)i(p[f]);"LINK"===e[l].tagName&&i(e[l])}t.appendChild(e[l]),window.setTimeout(function(){this.onTemplateInserted&&this.onTemplateInserted()}.bind(e[l]),10)}return e},l=function(e){for(var t in r)e=r[t](e);return new Function("obj","var w=webpublicationNamespace;var p=[];with(obj){p.push('"+e.replace(/[\r\t\n]/g," ").replace(/'(?=[^%]*%>)/g,"\t").split("'").join("\\'").split("\t").join("'").replace(/<%=(.+?)%>/g,"',$1,'").split("<%").join("');").split("%>").join("p.push('")+"');}return p.join('');")},c=function(t,n,r){n=n||{},"String"===e.Utils.getFunctionName(n.constructor)&&(n={content:n});for(var a in o)n[a+"Plugin"]=o[a];return Promise.resolve(u(t)).then(p.bind(this,t,n,r))},u=function(t){return"undefined"==typeof n[t]&&(n[t]=e.require(t).then(function(e){return Promise.resolve(l(e.responseText))})),n[t]},p=function(e,t,n,r){var o="div";t&&t.useTr===!0&&(o="table");var a=document.createElement(o);a.id="tmplWrapper",a.innerHTML=r(t),"table"===o&&(a=a.getElementsByTagName("tr")[0].parentNode);var s=[];if(a.querySelectorAll)for(var l in i)s.push(i[l](a,n));return Promise.all(s).then(function(){var t=[],n=a.childNodes.length,r=!1;for(e.indexOf("component")!==-1&&(r=e.replace(".html","").split("/"),r=r[r.length-1]);n--;){var o=a.childNodes[n];3===o.nodeType&&""===o.textContent.trim()||t.unshift(o)}return Promise.resolve(t)})},f=function(e,t){for(var n=e.length;n--;)t.parentNode.insertBefore(e[n],t),window.setTimeout(function(){this.onTemplateInserted&&this.onTemplateInserted()}.bind(e[n]),10);return e},g=function(e,t){for(var n=e.length;n--;)t.insertBefore(e[n],t.firstChild),window.setTimeout(function(){this.onTemplateInserted&&this.onTemplateInserted()}.bind(e[n]),10);return e},m=function(e,t){var n=null;n=t instanceof Node?t:t[0];for(var r=0;r<e.length;r++)n.parentNode.insertBefore(e[r],n),window.setTimeout(function(){this.onTemplateInserted&&this.onTemplateInserted()}.bind(e[r]),10);if(t instanceof Node)t.parentNode.removeChild(t);else for(var o=0;o<t.length;o++)t[o].parentNode.removeChild(t[o]);return e};t.addCallback=function(e,t){i[e]=t},t.addComponent=function(e,t){a[e]=t},t.addPlugin=function(e,t){o[e]=t},t.getPlugin=function(){return o},t.getComponentScript=function(){return a},t.getCache=function(){return n},t.prototype.load=function(t,n,r){return c(t,r,n).then(function(t){return e.Utils.empty(n),s(t,n)})},t.prototype.loadAppend=function(e,t,n){return c(e,n,t).then(function(e){return s(e,t)})},t.prototype.loadPrepend=function(e,t,n){return c(e,n,t).then(function(e){return g(e,t)})},t.prototype.loadBefore=function(e,t,n){return c(e,n,t).then(function(e){return f(e,t)})},t.prototype.loadReplace=function(e,t,n){return c(e,n,t).then(function(e){return m(e,t)})},e.Class.TemplateManager=t,e.Class.TemplateManager.addPlugin("escape",function(e){if(e)return e.replace("'","\\'")}),e.Class.TemplateManager.addPlugin("locale",function(t){return e.Utils.prodTools.getWordLangueByIndex(t)}),e.Class.TemplateManager.addPlugin("icon",function(t,n,r,o){var a=document.createElement("div");if(a.className="svgicon-new svgicon-"+t+" "+n,o)for(var i in o)a.setAttribute(i,o[i]);return e.Utils.svgIcon(a,{icon:t,color:r||null}),a.outerHTML}),e.Class.TemplateManager.addPlugin("encode",function(e){if(isNaN(e))return encodeURIComponent(e)}),e.Class.TemplateManager.addPlugin("template",function(e,t){var n="div";return t&&t.useTr===!0&&(n="tr"),t=t?JSON.stringify(t).replace(/"/g,"&quot;").replace(/\{/g,"&#123;").replace(/\}/g,"&#125;"):"{}","<"+n+' class="templateManagerPlaceholder" data-template="'+e+'" data-data="'+t+'"></'+n+">"}),e.Class.TemplateManager.addPlugin("hexToRgba",function(t,n){return n=parseFloat(n)/100,e.Utils.hexToRgb(t,n)})}(webpublicationNamespace);var _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};!function(e){"use strict";function t(){}var n,r,o=[];t.prototype.execute=function(t,o){if(r=o,n=e.Main.xmlManager.getVariable("transferring"),"undefined"==typeof n)return Promise.resolve();var a=new e.Class.QueryManager,i=t.querySelector("proxy");return i?a.execute(i).then(function(e){return r.transferring=e,Promise.resolve(e)}).then(a.execute.bind({},t)).then(this.parseData):a.execute(t).then(this.parseData)},t.prototype.parseData=function(){function e(t,n){for(var a in n)"object"===_typeof(n[a])&&n[a]instanceof Array==!1?e(t+"_"+a,n[a]):(r[t+"_"+a]=n[a],o.push(t+"_"+a))}return function(t){return e("transferring",t),r.transferring=n,Promise.resolve()}}(),t.prototype.remove=function(){localStorage&&localStorage.removeItem("transferring");for(var t in r)0===t.indexOf("transferring")&&delete r[t];return e.Main.urlManager["delete"]("transferring")},e.Class.TransferringManager=t}(webpublicationNamespace),function(e){"use strict";function t(e,t){for(var n=new RegExp("(\\"+t+'|\\r?\\n|\\r|^)(?:"([^"]*(?:""[^"]*)*)"|([^"\\'+t+"\\r\\n]*))","gi"),r=[],o=[],a=!1,i=0,s=null;null!==(s=n.exec(e));){var l=s[1];l.length&&l!==t&&(r.push({}),a=!0,i=0);var c;c=s[2]?s[2].replace(new RegExp('""',"g"),'"'):s[3],a===!1?o.push(c):r[r.length-1][o[i]]=c,i++}return r}function n(n,r){var o=t(r.trim(),n.getAttribute("separator")||","),a=n.querySelector("matchingProp");if(a){var i=e.Main.xmlManager.getVariable("transferring")||e.Main.urlManager.get("transferring");return o.filter(function(e){return e[a.getAttribute("id")]===i})[0]}return o}function r(e,t){var n=JSON.parse(t),r=e.querySelector("matchingProp");return r?n[r.getAttribute("id")]:n}function o(){}o.prototype.execute=function(t){var o,a=Array.prototype.filter.call(t.childNodes,function(e){return"dataset"===e.nodeName})[0],i=Array.prototype.filter.call(t.childNodes,function(e){return"url"===e.nodeName})[0],s=Array.prototype.filter.call(t.childNodes,function(e){return"asset"===e.nodeName})[0],l=a.getAttribute("type");i?o=i.textContent:s&&(o=e.Main.xmlManager.get("common-ui","assets",s.getAttribute("id")),o=o.hasOwnProperty("url")?o.url:o);var c=[];return i&&i.hasAttribute&&i.hasAttribute("username")&&i.hasAttribute("password")&&c.push({key:"Authorization",username:i.getAttribute("username"),password:i.getAttribute("password")}),e.Utils.promiseXHR("GET",e.Utils.resolveVariable(o),c).then(function(e){var t=null;return"JSON"===l?t=r(a,e.responseText):"CSV"===l&&(t=n(a,e.responseText)),Promise.resolve(t)})},e.Class.QueryManager=o}(webpublicationNamespace),function(e){"use strict";function t(){}var n={},r={},o={pubinfo:{},contents:{},template:{},locale:{},"common-ui":{},"common-configuration":{},summary:{},statistics:{get:function(){return null}},comboPages:{scrollablePages:[],forcedSinglePages:[],get:function(){return[]}}},a={pubinfo:function(e){"https:"===location.protocol&&(n.managerHost=(n.managerHost||n.manager_host).replace("http:","https:").replace(":80",":443")),o.pubinfo.template=null,o.pubinfo.contents=null,o.pubinfo.statistics="publication/contents/statistics.xml";for(var t=e.documentElement.childNodes,r=0;r<t.length;r++)"template"===t[r].tagName?o.pubinfo.template=this.resolver(t[r].getAttribute("url")):"contents"===t[r].tagName?o.pubinfo.contents=this.resolver(t[r].getAttribute("url")):"statistics"===t[r].tagName&&(o.pubinfo.statistics=this.resolver(t[r].getAttribute("url")));n.root="publication/",o.pubinfo.get=function(e){return o.pubinfo[e]}},contents:function i(t){var i=t.querySelector("contents");o.contents.config={pages_nr:parseInt(i.getAttribute("pages_nr")),shift:parseInt(i.getAttribute("shift")),prefix:i.getAttribute("prefix"),padding:parseInt(i.getAttribute("padding"))},NIApi.register("page.getCount",function(){return Promise.resolve(e.Main.xmlManager.get("common-configuration","config","pageCount"))}),o.contents.content={};for(var n=t.querySelectorAll("contents > content"),r=0;r<n.length;r++){var a=n[r].getAttribute("id").toLowerCase();o.contents.content[a]={id:a,width:parseInt(n[r].getAttribute("width")),height:parseInt(n[r].getAttribute("height")),path:this.resolver(n[r].getAttribute("path")),type:n[r].getAttribute("type"),ext:n[r].getAttribute("ext"),prefix:n[r].getAttribute("prefix")}}o.contents.get=function(e,t){if("undefined"!=typeof t)return o.contents.content[e][t];switch("thumbnails"===e&&o.contents.content.thumbnails_xdpi&&window.devicePixelRatio>=2&&(e="thumbnailsxdpi"),e){case"thumbnails_xdpi":e="thumbnailsxdpi";break;case"zoom_hd":e="zoomhd";break;case"full_pdf":e="fullPdf";break;default:e=e}if("undefined"==typeof o.contents.content[e])return null;var n="";return o.contents.content[e].prefix&&(n+=o.contents.content[e].prefix),o.contents.content[e].ext&&(n+="."+o.contents.content[e].ext),o.contents.content[e].path+n}},template:function(t){var n=t.querySelector("configs"),r=n.querySelector("preloader");o.template.configs={preloader:{wait_animation_preload:r.getAttribute("wait_animation_preload"),backgroundColor:r.getAttribute("backgroundColor"),progressColor:r.getAttribute("progressColor"),totalSizeColor:r.getAttribute("totalSizeColor")}},o.template.asset={};for(var a=t.querySelectorAll("assets > asset"),i=0;i<a.length;i++){var s=a[i].getAttribute("id");"custom_javascript"===s?(o.template.asset[s]=o.template.asset[s]||[],o.template.asset[s].push({id:s,url:this.resolver(a[i].getAttribute("url")),type:a[i].getAttribute("type"),appdom:a[i].getAttribute("appdom")})):o.template.asset[s]={id:s,url:this.resolver(a[i].getAttribute("url")),type:a[i].getAttribute("type"),appdom:a[i].getAttribute("appdom")},"locale"===s&&(o.template.asset.localeFlash={id:s,url:this.resolver(a[i].getAttribute("url")),type:a[i].getAttribute("type"),appdom:a[i].getAttribute("appdom")})}o.template.asset.localeHtml||(o.template.asset.localeHtml=o.template.asset.locale,o.template.asset.localeHtml.url="publication/locale/mobile/messages_"+e.Main.xmlManager.getVariable("locale")+".xml"),o.template.asset.css_html5&&o.template.asset.css_html5.url.indexOf("flash")!==-1&&(o.template.asset.css_html5={url:null}),o.template.get=function(e,t){return o.template.asset[e]?o.template.asset[e]:null},o.template.getConfig=function(e,t){return o.template.configs[e][t]}},locale:function(e){o.locale.messages=o.locale.messages||{};for(var t=e.querySelectorAll("message"),n=0;n<t.length;n++)o.locale.messages[t[n].getAttribute("id")]=t[n].textContent;o.locale.get=function(e){return o.locale.messages[e]}},localeFlash:function(e){o.locale.messages=o.locale.messages||{};for(var t=e.querySelectorAll("message"),n=0;n<t.length;n++)"undefined"==typeof o.locale.messages[t[n].getAttribute("id")]&&(o.locale.messages[t[n].getAttribute("id")]=t[n].textContent);for(var r=e.querySelectorAll("string"),a=0;a<r.length;a++)"undefined"==typeof o.locale.messages[r[a].getAttribute("name")]&&(o.locale.messages[r[a].getAttribute("name")]=r[a].textContent)},"common-ui":function(){function t(t){var n=!1,r=t.querySelector("menu_config");if(r){o["common-ui"].menu={left:[],center:[],right:[],burger:[]},o["common-ui"].menuViewControlItems=null;var a,i,s,l,c=["left","center","right","burger"],u=["default"];e.Param.isDesktop?u.push("desktop"):e.Param.isTablet?u.push("tablet"):u.push("mobile");var p=function(e){var t={};t.xmlElement=e,t.xmlString=e.outerHTML,void 0===t.xmlString&&(t.xmlString=(new XMLSerializer).serializeToString(e)),t.attributes={};for(var n=0;n<e.attributes.length;n++){var r=["label"],o=r.includes(e.attributes[n].name);o||(t.attributes[e.attributes[n].name]=e.attributes[n].value)}var a=e.querySelector("file");return a&&(t.file={image:a.getAttribute("url"),noMargin:a.getAttribute("noMargin"),url:a.getAttribute("href"),scale:a.getAttribute("scale")}),t},f=function(e){for(var t={},n=0;n<e.attributes.length;n++)t[e.attributes[n].name]=e.attributes[n].value;t.textContent="";try{t.textContent=e.textContent.trim()}catch(r){}return t},g=function(e){return Array.prototype.slice.call(e.querySelectorAll("element")).map(function(e){return"home"===e.getAttribute("name")&&(n=!0),p(e)})},m=function(e){return Array.prototype.slice.call(e.querySelectorAll("module")).map(function(e){return f(e)})},h=function(e,n,r,o,u){var f=e.querySelector("mode[name='"+n+"']");if(f){for(i in c)a=f.querySelector("menu[name='menu-"+c[i]+"']"),a&&(r[c[i]]=g(a));s=f.querySelector("panel_view_control"),s&&(o=p(s),o.children=g(s))}return l=t.querySelector("modules"),l&&(f=l.querySelector("mode[name='"+n+"']"),l&&f&&(u=m(f))),u},d={},v=null,b=[];for(i in c)d[c[i]]=[];for(var y in u)b=h(r,u[y],d,v,b);if(e.Main.urlManager.get("backHome")&&n===!1){var w=document.createElement("element");w.setAttribute("name","home"),d.right.push(p(w))}o["common-ui"].menu=d,o["common-ui"].panelViewControlItems=v,o["common-ui"].modules=b}}function r(t){o["common-ui"].assets={custom_css:[]};for(var n=t.querySelectorAll("template > asset"),r=0;r<n.length;r++){var a=n[r].getAttribute("name");"custom_javascript"===a||"custom_css"===a?(o["common-ui"].assets[a]=o["common-ui"].assets[a]||[],o["common-ui"].assets[a].push({name:a,url:n[r].getAttribute("url")})):o["common-ui"].assets[a]={name:a,url:n[r].getAttribute("url")},"locale"===a&&(o["common-ui"].assets.localeFlash={name:a,url:n[r].getAttribute("url")})}o["common-ui"].assets.localeHtml||(o["common-ui"].assets.localeHtml=o["common-ui"].assets.locale,o["common-ui"].assets.localeHtml.url="publication/locale/mobile/messages_"+e.Main.xmlManager.getVariable("locale")+".xml")}function a(e){o["common-ui"].services={};for(var t=e.querySelectorAll("services > service"),n=0;n<t.length;n++){var r=t[n].getAttribute("id");o["common-ui"].services[r]={};for(var a=0;a<t[n].attributes.length;a++){var i=t[n].attributes[a];o["common-ui"].services[r][i.name]=i.value}}}function i(t){var r=function(e,t,n){var r=o["common-ui"][e];return t?(r=r[t],n&&r?r[n]:r?r:null):r?r:null},a=function(e){o["common-ui"].configs.deepLinking=!0;var t=e.querySelector("configs > deep_linking");t&&"true"!==t.getAttribute("value")&&(o["common-ui"].configs.deepLinking=!1)},i=function(t){o["common-ui"].configs.cookie={enabled:!0,url:void 0};var n=t.querySelector("configs > cookie");n&&(n.getAttribute("enabled")&&(o["common-ui"].configs.cookie.enabled="true"===n.getAttribute("enabled")),n.getAttribute("url")&&(o["common-ui"].configs.cookie.url=n.getAttribute("url")),n.getAttribute("gdpr")&&(o["common-ui"].configs.cookie.gdpr="true"===n.getAttribute("gdpr")),o["common-ui"].configs.cookie.services=e.Main.xmlManager.getConsentServices(n))},s=function(e){o["common-ui"].configs.tooltip={delay:300};var t=e.querySelector("configs > tooltip");t&&t.getAttribute("delay")&&(o["common-ui"].configs.tooltip.delay=~~t.getAttribute("delay"))},l=function(t){var n=t.querySelector("configs > page_layout");e.Main.pageLayoutService=new e.Class.PageLayoutService(n)},c=function(e){var t=e.querySelector("configs > pdf_html_font_max_load");t?o["common-ui"].configs.pdfHTMLMaxFontLoad=~~t.getAttribute("value")||0:o["common-ui"].configs.pdfHTMLMaxFontLoad=0},u=function(t){var n=t.querySelector("configs > viewer");e.Main.viewerService=new e.Class.ViewerService(n)},p=function(t){var n=t.querySelector("configs > thumbnails");e.Main.thumbnailsService=new e.Class.ThumbnailsService(n)},f=function(e){var t=e.querySelector("configs > links");o["common-ui"].configs.links={},t&&(o["common-ui"].configs.links.mode=t.getAttribute("mode"),t.hasAttribute("duration")&&(o["common-ui"].configs.links.duration=parseInt(t.getAttribute("duration"),10)))},g=function(e){o["common-ui"].configs.chapters=[];for(var t=e.querySelectorAll("configs > chapters > element"),n=0;n<t.length;n++){for(var r=t[n],a={},i=0;i<r.attributes.length;i++){var s=r.attributes[i];a[s.name]=s.value}o["common-ui"].configs.chapters.push(a)}},m=function(e){o["common-ui"].configs.thumbs_chapters=[];for(var t=e.querySelectorAll("configs > thumbs_chapters > element"),n=0;n<t.length;n++){for(var r=t[n],a={},i=0;i<r.attributes.length;i++){var s=r.attributes[i];a[s.name]=s.value}o["common-ui"].configs.thumbs_chapters.push(a)}},h=function(t){if(o["common-ui"].configs.transferring=t.querySelector("transferring"),o["common-ui"].configs.transferringVariable="transferring",o["common-ui"].configs.transferring){var r="transferring";return o["common-ui"].configs.transferring.hasAttribute("variable")&&(r=o["common-ui"].configs.transferring.getAttribute("variable")),o["common-ui"].configs.transferringVariable=r,n.transferring=e.Main.urlManager.get(r)||localStorage&&localStorage.getItem(r)||n[r],e.Main.transferring=new e.Class.TransferringManager,function(){return e.Main.transferring.execute(o["common-ui"].configs.transferring,n)}}return null};o["common-ui"].configs={},o["common-ui"].get=r,a(t),i(t),s(t),l(t),c(t),u(t),p(t),f(t),g(t),m(t);var d=h(t);return d}return function(e){var n=Promise.resolve();t(e),r(e),a(e);var o=i(e);return o&&n.then(o),n}}(),"common-configuration":function(t){var n=t.querySelector("contents");o["common-configuration"].config={pageCount:parseInt(n.getAttribute("pages_count"),10),shift:parseInt(n.getAttribute("shift"),10)},o["common-configuration"].contents={};for(var r=t.querySelectorAll("contents > content"),a=0;a<r.length;a++){var i=r[a].getAttribute("id");o["common-configuration"].contents[i]={id:i,width:parseInt(r[a].getAttribute("width")),height:parseInt(r[a].getAttribute("height")),path:this.resolver(r[a].getAttribute("path"))}}o["common-configuration"].get=function(e,t,n){var r=o["common-configuration"][e];return t?(r=r[t],n&&r?r[n]:r?r:null):r?r:null},NIApi.register("page.getCount",function(){return Promise.resolve(e.Main.xmlManager.get("common-configuration","config","pageCount"))})},summary:function(t){o.summary.xml=t,o.summary.get=function(t,n){if("depth"===t){if(0===n)return[];var r=Array.apply(null,Array(n)).map(function(e,t){var n=Array.apply(null,Array(t+1)).map(String.prototype.valueOf,"it");return n.unshift("menu"),n.join(" > ")}),a=e.Main.xmlManager.get("summary","xml").querySelectorAll(r.join(", "));return Array.prototype.map.call(a,function(e){return{page:parseInt(e.getAttribute("p"),10),text:Array.prototype.map.call(e.childNodes,function(e){return"text"===e.nodeName?e.textContent:null}).filter(function(e){return null!==e})[0]}}).sort(function(e,t){return e.page-t.page})}if("xml"===t)return o.summary.xml}},statistics:function s(e){var s=e.querySelector("Statistics");o.statistics.version=parseInt(s.getAttribute("version")||"1",10),o.statistics.servers=s.querySelector("servers"),o.statistics.events=s.querySelector("events"),o.statistics.pages=s.querySelector("pages");var t=s.getAttribute("needConsent");null===t&&(t=!1),o.statistics.needConsent=!!t;var n=s.getAttribute("usePageNames");o.statistics.usePageNames="true"===n,o.statistics.get=function(e){return o.statistics[e]}},"combo-pages":function(e){var t=function(e){return parseInt(e.getAttribute("position"),10)},n=e.querySelectorAll('page[type="FILE"][fileType="PDF"]'),r=e.querySelectorAll('page[type="MOVIE"]'),a=[].concat(_toConsumableArray(r)).map(t);o.comboPages.pdfPageIndexes=[].concat(_toConsumableArray(n)).map(t),o.comboPages.scrollablePages=o.comboPages.pdfPageIndexes,o.comboPages.forcedSinglePages=[].concat(_toConsumableArray(o.comboPages.pdfPageIndexes),_toConsumableArray(a)),o.comboPages.get=function(e){return"scrollablePages"===e?o.comboPages.scrollablePages:"forcedSinglePages"===e?o.comboPages.forcedSinglePages:null}}};t.prototype.getVariable=function(e){return n[e]},t.prototype.getVariables=function(){return n},t.prototype.getConsentServices=function(e){var t=Array.prototype.slice.call(e.querySelectorAll("service"));return 0===t.length?["webpublicationStats"]:t.filter(function(e){return"true"===e.getAttribute("enabled")}).map(function(e){return e.getAttribute("name")})},t.prototype.get=function(t,n,r,o){if("common-ui"===t&&"configs"===n&&["viewer","thumbnails","pageLayout"].indexOf(r)>-1)return e.Main[r+"Service"].get(o);var a=this.getProxy(t,n,r,o);return"string"==typeof a?this.resolver(a):a},t.prototype.getProxy=function(e,t,n,r){return"config"===e&&"transferringVariable"===t?"transferring":"config"===e?!(!o.config.get&&"GAStatsEnabled"===t)&&o.config.get(t,n,r):"summary"===e?o.summary.get(t,n,r):"pubinfo"===e?o.pubinfo.get(t,n,r):"common-ui"===e&&"logo"===t?o[e].get&&o[e].get(t,n,r):"undefined"==typeof t?o[e]:o[e].get&&o[e].get(t,n,r)},t.prototype.getXml=function(e){if(r[e])return r[e]},t.prototype.resolver=function(){function e(e,t){return"undefined"!=typeof n[t]?n[t]:e}return function(t){return t?t.replace(/^~\//g,"publication/").replace(/\$([^\$]*)\$/g,e).replace(/\$\{([A-Za-z0-9-_]+)\}/gi,e):t}}(),t.prototype.parse=function(){function t(e){return function(t){var s=this,l=o(t);if(r[e]=l,i.call(this,l),"localeFlash"===e||"locale"===e){var c,u="name",p="string",f="Locale.";"locale"===e&&(u="id",p="message"),c=l.querySelectorAll(p),Array.prototype.forEach.call(c,function(e){var t=e.getAttribute(u),r=e.textContent;n[f+t]=s.resolver(r)});for(var g in n)n[g]=this.resolver(n[g])}var m=a[e].call(this,l);return m instanceof Promise?m:Promise.resolve(!0)}}function o(e){if(e.responseXML)return e.responseXML;var t=new DOMParser;return t.parseFromString(e.responseText,"text/xml")}function i(e){var t=e.getElementsByTagName("variables")[0];if(t){for(var r=t.childNodes,o=0;o<r.length;o++)s.call(this,r[o]);for(var a in n)n[a]=this.resolver(n[a])}}function s(e){if(1===e.nodeType&&e.getAttribute("value")){var t;t=e.getAttribute("id"),n[t]=this.resolver(e.getAttribute("value")),"root"===t&&(n.root="./publication/"),"media"===t&&location.href.indexOf("isApp")>-1&&(n.media=n.media.replace("assets/",""))}}return function(n,r){return e.Utils.promiseXHR("GET",r).then(t(n).bind(this))["catch"](function(e){console.warn(r,e)})}}(),e.Class.XmlManager=t}(webpublicationNamespace),function(e){"use strict";function t(){NIApi.register("stat.init",function(){var t=0,r=e.Main.xmlManager.get("statistics","servers");if(r){var o=r.childNodes;for(t=0;t<o.length;t++)o[t].tagName&&n(o[t])}var a=e.Main.xmlManager.get("statistics","events");if(a)for(a=a.children,t=0;t<a.length;t++)f[a[t].getAttribute("name")]={category:a[t].getAttribute("category"),action:a[t].getAttribute("action"),label:a[t].getAttribute("label")||a[t].getAttribute("title"),value:a[t].getAttribute("value")};else p=!0;var i=e.Main.xmlManager.get("statistics","pages");if(i)for(i=i.children,t=0;t<i.length;t++)u[i[t].getAttribute("name")]={url:i[t].getAttribute("url"),title:i[t].getAttribute("title")};else s=!0}),l=e.Main.xmlManager.get("statistics","usePageNames");var t=e.Main.xmlManager.get("statistics","needConsent"),r=e.Main.xmlManager.get("common-ui","configs","cookie"),o=r.enabled&&r.gdpr,a=t||o;!!a==!1&&NIApi.stat.init(),NIApi.register("stat.trackPage",function(e,t){return this.trackPage({name:e,variables:t}),Promise.resolve()}.bind(this)),NIApi.register("stat.trackEvent",function(e,t){return this.trackEvent({name:e,variables:t}),Promise.resolve()}.bind(this)),NIApi.register("stat.addTracker",function(e,t,n){return m[e][t]=n,Promise.resolve()}.bind(this)),NIApi.register("stat.trackCustomPage",function(e,t,n){return this.trackCustomPage({url:e,title:t,variables:n}),Promise.resolve()}.bind(this)),NIApi.register("stat.trackCustomEvent",function(e,t,n,r){return this.trackCustomEvent({category:e,action:t,label:n,variables:r}),Promise.resolve()}.bind(this))}function n(t){var n=g[t.tagName],r="modules/"+n+"/js/index.js";"undefined"==typeof n&&(n=t.tagName,r="js/"+n+"Tracker",e.addCustomTemplate("js","js/"+n+"Tracker.js","${template}html/js/modules/"+n+"Tracker.js")),e.require([r]).then(function(){i.push(new(e.Class[e.Utils.capitalize(n+"Tracker")])(t))})}function r(){for(var e=Array.prototype.slice.call(arguments),t=0;t<e.length;t++)if("undefined"!=typeof e[t])return e[t]}function o(e,t){if(e)for(var n in t)e=e.replace("${"+n+"}",t[n]);return e}var a="",i=[],s=!1,l=!1,c=[],u={},p=!1,f={},g={GoogleAnalytics:"analytics",GoogleTag:"googleTag",Matomo:"matomo",Piwik:"piwik",WebTrends:"webtrends",Xiti:"xiti"},m={page:{page:{url:"page=${1}",title:"${2}"},"old-page":{url:"page=${1}",title:"page ${1}"},"old-page-alt":{url:"page=${1}",title:"pages ${2}"},thumbnails:{url:"thumbnails",title:"page list"},search:{url:"search",title:"search panel"},"search-alt":{url:"search=${1}",title:'search for "${1}"'},pdf:{url:"pdf",title:"pdf generation"},print:{url:"print",title:"print"},contents:{url:"contents",title:"contents"},welcomepage:{url:"welcomepage",title:"welcome page"},share:{url:"share",title:"sharing"},"share-email":{url:"share=email",title:"email sharing"},favorites:{url:"favorites",title:"favorites list"},sharedby:{url:"sharedby",title:"shared by someone list"}},event:{pdfDownload:{action:"pdfDownload-${1}",label:"pdf download",category:"download"},pdfFullDownloadButton:{action:"pdfFullDownloadButton",label:"pdf full download",category:"download"},externalLink:{action:"externalLink",label:"external link to ${1}",category:"navigation"},videoPlay:{action:"videoPlay-${1}-${2}",label:"video play ${1} at ${2}",category:"enrichment"},videoPause:{action:"videoPause-${1}-${2}",label:"video pause ${1} at ${2}",category:"enrichment"},videoEnd:{action:"videoEnd-${1}",label:"video played ${1}",category:"enrichment"},shareMail:{action:"share-mail",label:"share by email",category:"share"},"shareMail-custom":{action:"share-${1}-mail",label:"share ${1} by email",category:"share"},"shareSocial-mail":{action:"share-Mail",label:"share on Mail",category:"share"},"shareSocial-print":{action:"share-Print",label:"share on Print",category:"share"},"shareSocial-download":{action:"share-Download",label:"share on Download",category:"share"},"shareSocial-facebook":{action:"share-Facebook",label:"share on Facebook",category:"share"},"shareSocial-twitter":{action:"share-Twitter",label:"share on Twitter",category:"share"},"shareSocial-linkedin":{action:"share-Linkedin",label:"share on Linkedin",category:"share"},"shareSocial-pinterest":{action:"share-Pinterest",label:"share on Pinterest",category:"share"},"shareSocial-tumblr":{action:"share-Tumblr",label:"share on Tumblr",category:"share"},"shareSocial-whatsapp":{action:"share-Whatsapp",label:"share on Whatsapp",category:"share"},"shareSocial-close":{action:"share-close",label:"share click close",category:"share"},"shareSocial-custom-mail":{action:"share-${1}-Mail",label:"share ${1} on Mail",category:"share"},"shareSocial-custom-print":{action:"share-${1}-Print",label:"share ${1} on Print",category:"share"},"shareSocial-custom-download":{action:"share-${1}-Download",label:"share ${1} on Download",category:"share"},"shareSocial-custom-facebook":{action:"share-${1}-Facebook",label:"share ${1} on Facebook",category:"share"},"shareSocial-custom-twitter":{action:"share-${1}-Twitter",label:"share ${1} on Twitter",category:"share"},"shareSocial-custom-linkedin":{action:"share-${1}-Linkedin",label:"share ${1} on Linkedin",category:"share"},"shareSocial-custom-pinterest":{action:"share-${1}-Pinterest",label:"share ${1} on Pinterest",category:"share"},"shareSocial-custom-tumblr":{action:"share-${1}-Tumblr",label:"share ${1} on Tumblr",category:"share"},"shareSocial-custom-whatsapp":{action:"share-${1}-Whatsapp",label:"share ${1} on Whatsapp",category:"share"},"shareSocial-custom-close":{action:"share-${1}-close",label:"share ${1} click close",category:"share"},print:{action:"print-${1}",label:"print",category:"print"},bookmark:{action:"bookmark-${1}",label:"page ${1} bookmarked",category:"bookmark"},unbookmark:{action:"unbookmark-${1}",label:"page ${1} removed from bookmarks",category:"bookmark"},link:{action:"link-${1}-${2}",label:"enrichment click",category:"enrichment"},pageView:{action:"pageView-${1}",label:"page ${1} viewed",category:"navigation"},pageNext:{action:"pageNext-${1}",label:"next page of ${1}",category:"navigation"},pagePrev:{action:"pagePrev-${1}",label:"previous page of ${1}",category:"navigation"},pageFirst:{action:"pageFirst-${1}",label:"first page from ${1}",category:"navigation"},pageLast:{action:"pageLast-${1}",label:"last page from ${1}",category:"navigation"},lightboxOpen:{action:"lightboxOpen-${1}",label:"Opening lightbox ${1}",category:"lightbox"},lightboxClose:{action:"lightboxClose-${1}",label:"Closing lightbox ${1}",category:"lightbox"},zoomIn:{action:"zoomIn-${1}",label:"zoom in page ${1}",category:"navigation"},zoomOut:{action:"zoomOut-${1}",label:"zoom out page ${1}",
category:"navigation"},fullScreenOn:{action:"fullScreenOn",label:"full screen activated",category:"navigation"},fullScreenOff:{action:"fullScreenOff",label:"full screen deactivated",category:"navigation"},menuOpen:{action:"menuOpen",label:"open the menu",category:"menu"},menuClose:{action:"menuClose",label:"close the menu",category:"menu"},chapter:{action:"chapters-${1}",label:"go to chapter ${1}",category:"navigation"}}};t.prototype.trackPage=function(t){var n=u[t.name],p=m.page[t.name];if("undefined"!=typeof t.name&&(s!==!1||"undefined"!=typeof n)&&t.url!==a){if(n=n||{},t.variables=t.variables||{},"page"===t.name){var f=t.variables[1];if(t.variables[1]=f.join("-"),l){var g=f.map(function(e){return c[e-1]});t.variables[2]=g.join(" and ")}else t.variables[2]=f.join(" and "),p=1===f.length?m.page["old-page"]:m.page["old-page-alt"]}t.url=r(n.url,t.url,p.url),t.url=location.pathname+location.search+"#"+t.url,t.title=r(n.title,t.title,p.title),t.url=o(t.url,t.variables),t.url=e.Utils.whitelistParameters(t.url),t.title=o(t.title,t.variables);for(var h=0;h<i.length;h++)i[h].trackPage(location.pathname,t.url,t.title);a=t.url}},t.prototype.trackEvent=function(e){var t=f[e.name],n=m.event[e.name]||{};if("undefined"!=typeof e.name&&(p!==!1||"undefined"!=typeof t)){t=t||{},e.variables=e.variables||{},e.category=r(t.category,e.category,n.category),e.action=r(t.action,e.action,n.action),e.label=r(t.label,e.label,n.label),e.value=r(t.value,e.value,n.value);var a=!!e.category;if(a){e.category=o(e.category,e.variables),e.action=o(e.action,e.variables),e.label=o(e.label,e.variables),e.value=o(e.value,e.variables);var s=new CustomEvent("webpub-tracking",{detail:e});window.dispatchEvent(s);for(var l=0;l<i.length;l++)i[l].trackEvent(e.category,e.action,e.label,e.value)}}},t.prototype.trackCustomPage=function(t){if(t.url!==a){e.Utils._assertString(t.url,"The page URL should be a string"),e.Utils._assertString(t.title,"The page title should be a string"),a=t.url,t.variables=t.variables||{},t.url=location.pathname+location.search+"#"+t.url,t.url=o(t.url,t.variables),t.url=e.Utils.whitelistParameters(t.url),t.title=o(t.title,t.variables);for(var n=0;n<i.length;n++)i[n].trackPage(location.pathname,t.url,t.title)}},t.prototype.trackCustomEvent=function(t){e.Utils._assertString(t.category,"The page URL should be a string"),e.Utils._assertString(t.action,"The page title should be a string"),e.Utils._assertString(t.label,"The page title should be a string"),t.variables=t.variables||{},t.category=o(t.category,t.variables),t.action=o(t.action,t.variables),t.label=o(t.label,t.variables),t.value=o(t.value,t.variables);for(var n=0;n<i.length;n++)i[n].trackEvent(t.category,t.action,t.label,t.value)},t.prototype.initPageTitles=function(e,t){return t?void(c=this.getPageTitlesFromChapters(e,t)):void(c=this.getPageTitlesDefault(e))},t.prototype.getPageTitlesFromChapters=function(e,t){var n=[],r=[],o=[],a=t[0],i="Home";1!==a.page&&t.splice(0,0,{name:i,page:1});for(var s=1,l=t[1],c=t[0],u=1;u<=e;u++){l&&u>=l.page&&(s++,l=t[s],c=t[s-1]);var p=1+u-c.page,f=p;n.push(c.name),r.push(f)}for(var g=0;g<e;g++){var m=r[g],h=n[g],d=r[g+1];o[g]=h,1===m&&2!==d||(o[g]+=" - "+m)}return o},t.prototype.getPageTitlesDefault=function(e){for(var t=[],n=0;n<e;n++)t[n]="Page "+(n+1);return t},e.Class.TrackerManager=t}(webpublicationNamespace),function(w){"use strict";function StartupManager(){}var data={reader:{type:"auto",mode:"3d"},ui:{paging:{mode:["bottom","lateral"],lateral:{hasPrevNext:!0,hasFirstLast:!0,display:"sticky"}},menu:{mode:["aside","topnav"]},carousel:{mode:["standard"]},zoom:{mode:["doubleclick","pinch"]},theme:{mode:["v4"]}},core:{session:"client",viewer:"v4",viewerDirection:"horizontal",mode:["canvas"],format:["img"]}};StartupManager.prototype._set=function(key,value){for(var splitedKey=key.split("."),finalKey="",i=0;i<splitedKey.length;i++)finalKey+=finalKey?"."+splitedKey[i]:splitedKey[i],eval("data."+finalKey+" = data."+finalKey+" || {};");eval("data."+key+'="'+value+'"')},StartupManager.prototype.start=function(){return w.Utils.promiseXHR("GET","publication/contents/templates/startup.json").then(function(e){return e.responseText&&(data=JSON.parse(e.responseText)),Promise.resolve(!0)})["catch"](function(e){return console&&console.error&&console.error("Failed to load the startup.json. There is probably a syntax error. Message: "+e.toString()),Promise.resolve(!0)})},StartupManager.prototype.get=function(e){var t=null;if(0===e.indexOf("ui.")){var n=w.Param.userAgent.device.type,r=n.charAt(0).toUpperCase()+n.slice(1),o="ui"+r,a=this.get(e.replace(/^ui\./,o+"."));if(null!==a)return a}if("core.verticalArrow.position"===e){var i=this.get("core.verticalArrowPosition");if(i)return i}"core.verticalArrow.display"===e&&(t=["desktop","tablet"]);for(var s=e.split("."),l=data,c=0;c<s.length;c++){if("undefined"==typeof l[s[c]])return t;l=l[s[c]]}return l},StartupManager.prototype.has=function(e,t){var n=this.get(e);return n instanceof Array&&n.indexOf(t)>-1},w.Class.StartupManager=StartupManager}(webpublicationNamespace);var _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};!function(e){"use strict";function t(){}var n={pagesData:[]};t.prototype.start=function(){var r=e.Main.xmlManager.get("common-ui","assets","configs_json"),o=null;if(r&&(o=e.Utils.resolveVariable(r.url)),!o){var a=!e.Main.startupManager.has("core.format","epub-HTML");if(a)return Promise.resolve(!0);var i="publication/contents/media-epub/script/configs.json";o=i}return e.Utils.promiseXHR("GET",o).then(function(e){return e.responseText&&(n=t.prototype.merge(n,JSON.parse(e.responseText))),Promise.resolve(!0)})["catch"](function(e){return console&&console.error&&console.error("Failed to load the configs.json. There is probably a syntax error. Message: "+e.toString()),Promise.resolve(!0)})},t.prototype.get=function(e){for(var t=e.split("."),r=n,o=0;o<t.length;o++){if("undefined"==typeof r[t[o]])return null;r=r[t[o]]}return r},t.prototype.getPagesData=function(e){var t=this.get("pagesData");if(!t)return null;if(!e)return t;var n=t.map(function(t){var n={};return e.forEach(function(e){n[e]=t[e]}),n});return n},t.prototype.getPageData=function(e,n){var r=t.prototype.getPagesData(e);return r&&r[n]?r[n]:{}},t.prototype.has=function(e,t){var n=this.get(e);return n instanceof Array&&n.indexOf(t)>-1},t.prototype.convertFromPercentIfNeeded=function(e,t){var n=e.toLowerCase().endsWith("opacity");return n&&parseFloat(t)>1?parseFloat(t)/100:t},t.prototype.merge=function(e,t){if(!t)return e;for(var n=JSON.parse(JSON.stringify(e)),r=Object.keys(t),o=0;o<r.length;o++){var a=r[o],i=t[a];if("object"!==("undefined"==typeof i?"undefined":_typeof(i)))n[a]=this.convertFromPercentIfNeeded(a,i);else{var s=Array.isArray(i)?[]:{};n[a]=this.merge(n[a]||s,i)}}return n},NIApi.register("configsJson.getPagesData",function(){return t.prototype.getPagesData()}),NIApi.register("configsJson.setPageData",function(e,r){var o=t.prototype.getPagesData(),a=o&&o[e]?o[e]:{};n.pagesData[e]=t.prototype.merge(a,r),document.dispatchEvent(new CustomEvent("configsJson.pageDataUpdated"))}),e.Class.ConfigsJsonManager=t}(webpublicationNamespace);var _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};!function(e){function t(){e.Param.viewBody.setAttribute("touch-action","none"),e.Main.templateManager=new e.Class.TemplateManager,e.Param.isLocalReader="http:"!==location.protocol&&"https:"!==location.protocol;var t="file:"===location.protocol||"ms-local-stream:"===location.protocol||"ms-appx:"===location.protocol||"ms-appx-web:"===location.protocol;if(e.Param.isApp=t||e.Main.urlManager.get("isApp"),e.Param.isTouch="ontouchstart"in document.documentElement,this.setMode(),this.createSession(),e.Param.userAgent.browser.name===e.Param.userAgent.BROWSER.IE&&e.Param.userAgent.browser.version<11){var r=document.createElement("script");r.type="text/javascript",r.src="global_conf/jquery.js",r.onreadystatechange=function(){"loaded"!==r.readyState&&"complete"!==r.readyState||n.call(this)}.bind(this),document.getElementsByTagName("head")[0].appendChild(r)}else n.call(this)}var n=function(){if(e.Main.startupManager.get("reader.url.flash")&&"flash"===this.mode){var t;try{t=window.ActiveXObject&&new ActiveXObject("ShockwaveFlash.ShockwaveFlash")!==!1}catch(n){t=!1}var r="undefined"!=typeof navigator.plugins&&"object"==_typeof(navigator.plugins["Shockwave Flash"])||t;if(r)return void(location.href=e.Main.startupManager.get("reader.url.flash")+location.search+location.hash)}if("html"===this.mode){var o="reader.url.html"+e.Utils.capitalize(e.Param.userAgent.device.type),a="reader.url.html";if(e.Main.startupManager.get(o))return void(location.href=e.Main.startupManager.get(o)+location.search+location.hash);if(e.Main.startupManager.get(a))return void(location.href=e.Main.startupManager.get(a)+location.search+location.hash)}if(e.Main.templateManager.loadAppend(this.getBody(),e.Param.viewBody),e.Main.templateManager.loadAppend(this.getHead(),e.Param.viewHead),this.mobileSupported===!0)for(var i=document.querySelectorAll(".noflash-mobile"),s=0;s<i.length;s++)i[s].style.display="none"};t.prototype.mode="flash",t.prototype.getBody=function(){return"./global_conf/template/"+this.mode+"/body.html"},t.prototype.getHead=function(){return"./global_conf/template/"+this.mode+"/head.html"},t.prototype.createSession=function(){var t=e.Main.xmlManager.getVariable("client_id"),n=e.Main.xmlManager.getVariable("id"),r=e.Main.startupManager.get("core.session")||"single",o=e.Utils.getCookie("session_"+t),a=t+"_";o=o?o.split(";"):[],"single"===r&&(a=n+a);for(var i=0;i<o.length;i++)if(0===atob(o[i]).indexOf(a))return e.Param.sessionId=o[i],void(e.Param.sessionId=e.Param.sessionId.replace(/=/g,""));e.Param.sessionId=btoa(a+Math.random().toString().substring(2)),o.push(e.Param.sessionId),e.Param.sessionId=e.Param.sessionId.replace(/=/g,"")},t.prototype.setMode=function(t){"flash"===e.Main.urlManager.get("version")||"flash"===e.Main.startupManager.get("reader.type")?this.mode="flash":e.Main.urlManager.contains("forceMobile")===!0||"html"===e.Main.urlManager.get("version")||"true"===e.Main.urlManager.get("isApp")||"html"===e.Main.startupManager.get("reader.type")?this.mode="html":"undefined"==typeof t?e.Param.userAgent.device.type===e.Param.userAgent.FORMAT.TABLET||e.Param.userAgent.device.type===e.Param.userAgent.FORMAT.PHONE||e.Param.userAgent.device.type===e.Param.userAgent.FORMAT.PHABLET?this.mode="html":this.mode="flash":this.mode=t,this.mobileSupported=!0,e.Param.userAgent.browser.name===e.Param.userAgent.BROWSER.IE&&(e.Param.userAgent.browser.version<=10||"unknown"===e.Param.userAgent.browser.version)&&(this.mode="flash",this.mobileSupported=!1)},t.prototype.rebuild=function(){return this.mode="html",n.call(this)},e.Class.Switcher=t}(webpublicationNamespace),function(e){e.Param.viewBody=document.body,e.Param.viewHead=document.getElementsByTagName("head")[0],e.Param.userAgent=new e.Class.UserAgentManager,e.Param.isDesktop=e.Param.userAgent.isDesktop(),e.Param.isPhone=e.Param.userAgent.isPhone(),e.Param.isTablet=e.Param.userAgent.isTablet(),e.Param.isPhablet=e.Param.userAgent.isPhablet(),e.Param.isUnknown=e.Param.userAgent.isUnknown(),e.Param.supportsPassive=!1;try{var t=Object.defineProperty({},"passive",{get:function(){e.Param.supportsPassive=!0}});window.addEventListener("test",null,t)}catch(n){}var r=function(t){var n=e.Main.xmlManager.parse("statistics",t);n.then(function(){2===e.Main.xmlManager.get("statistics","version")&&(e.Main.trackerManager=new e.Class.TrackerManager)})};return e.Main.startupManager=new e.Class.StartupManager,e.Main.startupManager.start().then(function(){e.Main.urlManager=new e.Class.UrlManager,e.Main.xmlManager=new e.Class.XmlManager;var t=Promise.resolve();t.then(function(){return e.Main.xmlManager.parse("common-configuration",e.Param.pathRoot+"contents/common-configuration.xml").then(function(){return"undefined"==typeof e.Main.xmlManager.getXml("common-configuration")?(console&&console.error&&console.error("No new conf file available, switching to the old model"),e.Main.startupManager._set("reader.configurationVersion",1),Promise.reject()):e.Main.xmlManager.parse("common-ui",e.Param.pathRoot+"contents/templates/common-ui.xml")}).then(function(){return e.Main.configsJsonManager=new e.Class.ConfigsJsonManager,e.Main.configsJsonManager.start()}).then(function(){if(e.Main.xmlManager.getVariable("combo"))return e.Main.xmlManager.parse("combo-pages",e.Param.pathRoot+"contents/media-epub/combo-pages.xml")}).then(function(){e.Main.switcher=new e.Class.Switcher;var t=null;try{t=e.Main.xmlManager.getXml("common-ui").querySelector("template asset[id='statistics']").getAttribute("url")}catch(n){t=e.Main.xmlManager.get("common-configuration","contents","statistics","path")}null===t&&(t=e.Param.pathRoot+"contents/statistics.xml"),t=e.Utils.resolveVariable(t),r(t)})})["catch"](function(){e.Main.xmlManager.parse("pubinfo",e.Param.pathRoot+"contents/pubinfo.xml").then(function(){return e.Main.xmlManager.parse("contents",e.Main.xmlManager.get("pubinfo","contents"))}).then(function(){return e.Main.xmlManager.parse("template",e.Main.xmlManager.get("pubinfo","template"))}).then(function(){e.Main.switcher=new e.Class.Switcher;var t=null,n=e.Main.xmlManager.getXml("template"),o=n.querySelector("asset[id='statistics']");o&&(t=e.Utils.resolveVariable(o.getAttribute("url"))),t||(t=e.Main.xmlManager.get("pubinfo","statistics")),r(t)})})})}(webpublicationNamespace),function(e){"use strict";function t(){}var n={};t.prototype.fetch=function(){var t=e.Main.xmlManager.get("common-ui","assets","common_layout");if(!t)return Promise.resolve(!0);var r=e.Utils.resolveVariable(t.url?t.url:t);e.Utils.promiseXHR("GET",r).then(function(e){return e.responseText&&(n=JSON.parse(e.responseText)),Promise.resolve(!0)})["catch"](function(){return Promise.resolve(!0)})},t.prototype.set=function(e,t){for(var r=e.split("."),o=n,a=0;a<r.length-1;a++)o.hasOwnProperty(r[a])||(o[r[a]]={}),o=o[r[a]];o[r[r.length-1]]=t},t.prototype.get=function(e){for(var t=e.split("."),r=n,o=0;o<t.length;o++){if("undefined"==typeof r[t[o]])return null;r=r[t[o]]}return r},e.Class.CommonLayout=t}(webpublicationNamespace),function(e){function t(){this.config={contentsDepth:0}}function n(e){if(e&&e.hasAttribute("contentsDepth")){var t=e.getAttribute("contentsDepth");this.config.contentsDepth=parseInt(t,10)}}function r(e){t.call(this),n.call(this,e)}var o={contentsDepth:function(){return this.config.contentsDepth}};r.prototype.get=function(e){return o[e].call(this)},r.prototype.set=function(e){for(var t in e)"contentsDepth"===t&&(this.config.contentsDepth=parseInt(e[t],10))},e.Class.ThumbnailsService=r}(webpublicationNamespace),function(e){function t(){return e.Param.isTablet?"tablet":e.Param.isPhone?"phone":e.Param.isDesktop?"desktop":void 0}function n(e){this.viewerConfig={device:t(),rotateClue:null,zoomClick:2,zoomMaxScale:2.5,padding:{portrait:{},landscape:{}}}}function r(t){if(null!==t){var n=this.viewerConfig.device,r=t.querySelector("mode[name="+n+"]");if(r){var o=r.querySelectorAll("padding");Array.prototype.forEach.call(o,function(t){for(var n=this.viewerConfig.padding,r=Object.keys(n.portrait).length>0,o=Object.keys(n.landscape).length>0,a=1;a<u.length;a++){var i=t.getAttribute(u[0]),s=i?i:t.getAttribute(u[a]),l="padding"+e.Utils.capitalize(u[a]);if(s)if(s=parseInt(s,10),t.hasAttribute("orientation")){var c=t.getAttribute("orientation");this.viewerConfig.padding[c][l]=s}else r===!1&&(this.viewerConfig.padding.portrait[l]=s),o===!1&&(this.viewerConfig.padding.landscape[l]=s)}}.bind(this))}}}function o(t){if(null!==t){t.hasAttribute("rotate_clue")&&e.Param.isDesktop===!1&&(this.viewerConfig.rotateClue=t.getAttribute("rotate_clue"));var n=this.viewerConfig.device,r=t.querySelector("mode[name="+n+"]");r&&r.hasAttribute("rotate_clue")&&(this.viewerConfig.rotateClue=r.getAttribute("rotate_clue"))}}function a(n){if(null!==n){var r=this.viewerConfig.device,o=n.querySelector("mode[name="+r+"] zoom");o=o||n.querySelector("mode[name=default] zoom"),o&&o.hasAttribute("clicks")&&(this.viewerConfig.zoomClick=parseInt(o.getAttribute("clicks"),10)),1===this.viewerConfig.zoomClick&&(e.Main.startupManager._set("ui.menu.topnav.display","sticky"),e.Main.startupManager._set("ui"+e.Utils.capitalize(t())+".menu.topnav.display","sticky")),o&&o.hasAttribute("max_scale")&&(this.viewerConfig.zoomMaxScale=o.getAttribute("max_scale"))}}function i(e){l.call(this,e,"page")}function s(e){l.call(this,e,"popup")}function l(e,t){var n=this;if(null!==e){var r=this.viewerConfig.device,o=e.querySelector("mode[name="+r+"] "+t);o=o||e.querySelector("mode[name=default] "+t),null!==o&&Array.prototype.forEach.call(o.attributes,function(e){n.viewerConfig[t+"_"+e.localName]=e.value})}}function c(e){n.call(this,e),r.call(this,e),o.call(this,e),a.call(this,e),i.call(this,e),s.call(this,e)}var u=["all","top","right","left","bottom"],p={paddingTop:0,paddingRight:0,paddingLeft:0,paddingBottom:0};c.prototype.get=function(t,n){return t=e.Utils.capitalize(t),this["get"+t](n)},c.prototype.getPadding=function(){var t={},n=e.Param.isPortrait?"portrait":"landscape";for(var r in p)t[r]=p[r];for(var o in this.viewerConfig.padding[n])t[o]=this.viewerConfig.padding[n][o];return t},c.prototype.getRotateClue=function(){return this.viewerConfig.rotateClue},c.prototype.getZoom=function(e){return"click"===e?this.viewerConfig.zoomClick:"max-scale"===e?this.viewerConfig.zoomMaxScale:null},c.prototype.getPage=function(e){return this.viewerConfig["page_"+e]},c.prototype.getPopup=function(e){return this.viewerConfig["popup_"+e]},c.prototype.set=function(e){for(var t in e)if(0===t.indexOf("padding")){var n=this.viewerConfig.padding;n.portrait[t]=n.portrait[t]||e[t],n.landscape[t]=n.landscape[t]||e[t]}else this.viewerConfig[t]=e[t]},e.Class.ViewerService=c}(webpublicationNamespace),function(e){function t(e){this.config={pageLayout:"auto",pagesOnFirstFrame:1}}function n(t){if(null!==t&&t.hasAttribute("first_frame")){var n=t.getAttribute("first_frame");e.Utils._assertInteger(n,"Page number must be an integer")&&(this.config.pagesOnFirstFrame=parseInt(n,10))}}function r(e){if(null!==e&&e.hasAttribute("value")){var t=e.getAttribute("value");this.config.pageLayout=""===t?"auto":t}}function o(e){t.call(this,e),n.call(this,e),r.call(this,e)}o.prototype.getPageLayout=function(){return this.config.pageLayout},o.prototype.getPagesOnFirstFrame=function(){return this.config.pagesOnFirstFrame},o.prototype.get=function(t){return t=e.Utils.capitalize(t),this["get"+t]()},o.prototype.set=function(e){for(var t in e)this.viewerConfig[t]=e[t]},e.Class.PageLayoutService=o}(webpublicationNamespace);